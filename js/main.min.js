!function(o){"use strict";var r=function(e,t){this.$element=o(e),this.options=o.extend({},r.DEFAULTS,t),this.$trigger=o('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};function i(e){var t,a=e.attr("data-target")||(t=e.attr("href"))&&t.replace(/.*(?=#[^\s]+$)/,"");return o(a)}function l(n){return this.each(function(){var e=o(this),t=e.data("bs.collapse"),a=o.extend({},r.DEFAULTS,e.data(),"object"==typeof n&&n);!t&&a.toggle&&/show|hide/.test(n)&&(a.toggle=!1),t||e.data("bs.collapse",t=new r(this,a)),"string"==typeof n&&t[n]()})}r.VERSION="3.3.7",r.TRANSITION_DURATION=350,r.DEFAULTS={toggle:!0},r.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},r.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,t=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(t&&t.length&&(e=t.data("bs.collapse"))&&e.transitioning)){var a=o.Event("show.bs.collapse");if(this.$element.trigger(a),!a.isDefaultPrevented()){t&&t.length&&(l.call(t,"hide"),e||t.data("bs.collapse",null));var n=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[n](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var i=function(){this.$element.removeClass("collapsing").addClass("collapse in")[n](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!o.support.transition)return i.call(this);var s=o.camelCase(["scroll",n].join("-"));this.$element.one("bsTransitionEnd",o.proxy(i,this)).emulateTransitionEnd(r.TRANSITION_DURATION)[n](this.$element[0][s])}}}},r.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=o.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var t=this.dimension();this.$element[t](this.$element[t]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var a=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!o.support.transition)return a.call(this);this.$element[t](0).one("bsTransitionEnd",o.proxy(a,this)).emulateTransitionEnd(r.TRANSITION_DURATION)}}},r.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},r.prototype.getParent=function(){return o(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(o.proxy(function(e,t){var a=o(t);this.addAriaAndCollapsedClass(i(a),a)},this)).end()},r.prototype.addAriaAndCollapsedClass=function(e,t){var a=e.hasClass("in");e.attr("aria-expanded",a),t.toggleClass("collapsed",!a).attr("aria-expanded",a)};var e=o.fn.collapse;o.fn.collapse=l,o.fn.collapse.Constructor=r,o.fn.collapse.noConflict=function(){return o.fn.collapse=e,this},o(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(e){var t=o(this);t.attr("data-target")||e.preventDefault();var a=i(t),n=a.data("bs.collapse")?"toggle":t.data();l.call(a,n)})}(jQuery),function(o){"use strict";var r='[data-toggle="dropdown"]',n=function(e){o(e).on("click.bs.dropdown",this.toggle)};function l(e){var t=e.attr("data-target");t||(t=(t=e.attr("href"))&&/#[A-Za-z]/.test(t)&&t.replace(/.*(?=#[^\s]*$)/,""));var a=t&&o(t);return a&&a.length?a:e.parent()}function s(n){n&&3===n.which||(o(".dropdown-backdrop").remove(),o(r).each(function(){var e=o(this),t=l(e),a={relatedTarget:this};t.hasClass("open")&&(n&&"click"==n.type&&/input|textarea/i.test(n.target.tagName)&&o.contains(t[0],n.target)||(t.trigger(n=o.Event("hide.bs.dropdown",a)),n.isDefaultPrevented()||(e.attr("aria-expanded","false"),t.removeClass("open").trigger(o.Event("hidden.bs.dropdown",a)))))}))}n.VERSION="3.3.7",n.prototype.toggle=function(e){var t=o(this);if(!t.is(".disabled, :disabled")){var a=l(t),n=a.hasClass("open");if(s(),!n){"ontouchstart"in document.documentElement&&!a.closest(".navbar-nav").length&&o(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(o(this)).on("click",s);var i={relatedTarget:this};if(a.trigger(e=o.Event("show.bs.dropdown",i)),e.isDefaultPrevented())return;t.trigger("focus").attr("aria-expanded","true"),a.toggleClass("open").trigger(o.Event("shown.bs.dropdown",i))}return!1}},n.prototype.keydown=function(e){if(/(38|40|27|32)/.test(e.which)&&!/input|textarea/i.test(e.target.tagName)){var t=o(this);if(e.preventDefault(),e.stopPropagation(),!t.is(".disabled, :disabled")){var a=l(t),n=a.hasClass("open");if(!n&&27!=e.which||n&&27==e.which)return 27==e.which&&a.find(r).trigger("focus"),t.trigger("click");var i=a.find(".dropdown-menu li:not(.disabled):visible a");if(i.length){var s=i.index(e.target);38==e.which&&0<s&&s--,40==e.which&&s<i.length-1&&s++,~s||(s=0),i.eq(s).trigger("focus")}}}};var e=o.fn.dropdown;o.fn.dropdown=function(a){return this.each(function(){var e=o(this),t=e.data("bs.dropdown");t||e.data("bs.dropdown",t=new n(this)),"string"==typeof a&&t[a].call(e)})},o.fn.dropdown.Constructor=n,o.fn.dropdown.noConflict=function(){return o.fn.dropdown=e,this},o(document).on("click.bs.dropdown.data-api",s).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",r,n.prototype.toggle).on("keydown.bs.dropdown.data-api",r,n.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",n.prototype.keydown)}(jQuery),$(document).ready(function(){var h=["January","February","March","April","May","June","July","August","September","October","November","December"],u=function(e){return e<10?"0"+e:e};$.get("/feeds/uop-news.json",function(e){$("#panel-news").empty();for(var t,a,n=e.posts.slice(0,3),i=0;i<n.length;i++){var s=n[i],o=s.title,r=s.thumbnail_images.medium.url;""!=r&&void 0!==r||(r="/images/placeholder/news.png");var l=s.date.split(/[- :]/),d="Posted: "+(l=new Date(Date.UTC(l[0],l[1]-1,l[2],l[3],l[4],l[5]))).getUTCDate()+" "+h[l.getMonth()]+" "+l.getFullYear(),p=s.url;a=void 0,a='<a href="'+p+'" class="media" target="_blank"><div class="media-left">',a+='<img class="media-object" aria-hidden="true" src="'+r+'" alt="'+(t=o)+'"></div><div class="media-body">',a+='<h4 class="media-heading">'+t+"</h4>",a+='<p class="media-date">'+d+"</p></div></a>",$("#panel-news").append(a)}}).fail(function(){$("#panel-news").empty().append("Error loading feed")}),$.get("/feeds/uop-events.json",function(e){$("#panel-events").empty();for(var t,a=e.posts.reverse(),n=0,i=0,s=0;s<a.length;s++){var o=a[s],r=o.title,l=o.custom_fields.eventvenue;l=0<l.length?l[0]:"";var d=o.custom_fields.eventdate[0].split(/[- :]/);if(d=new Date(Date.UTC(d[0],d[1]-1,d[2],d[3],d[4])),!(isNaN(d.getUTCDate())||d<new Date)){if(4==++n)break;var p=o.custom_fields.eventdateend[0].split(/[- :]/);p=new Date(Date.UTC(p[0],p[1]-1,p[2],p[3],p[4]));var c="";c=d.getUTCDate()==p.getUTCDate()&&d.getMonth()==p.getMonth()?d.getUTCDate()+" "+h[d.getMonth()]+" "+d.getFullYear()+" - "+u(d.getUTCHours())+":"+u(d.getMinutes())+" until "+u(p.getUTCHours())+":"+u(p.getMinutes()):d.getUTCDate()+" "+h[d.getMonth()]+" "+d.getFullYear()+" - "+u(d.getUTCHours())+":"+u(d.getMinutes())+" until </br>"+p.getUTCDate()+" "+h[p.getMonth()]+" "+p.getFullYear()+" - "+u(p.getUTCHours())+":"+u(p.getMinutes());var g=o.url;t=void 0,t='<a href="'+g+'" class="media" target="_blank"><div class="media-body">',t+='<h4 class="media-heading">'+r+"</h4>",t+='<p class="media-date">'+c+"</p>",t+='<p class="media-location">'+l+"</p></div></a>",$("#panel-events").append(t),i++}}0==i&&$("#panel-events").append("<p>There are no upcoming events</p>")}).fail(function(){$("#panel-events").empty().append("Error loading feed")}),$.get("/feeds/uop-participants.json",function(e){$("#panel-participants").empty();for(var t,a,n=e.posts.slice(0,3),i=0;i<n.length;i++){var s=n[i],o=s.title,r="";0<s.custom_fields.customdepartment.length&&(r=s.custom_fields.customdepartment[0]);var l=s.thumbnail_images.medium.url;""!=l&&void 0!==l||(l="/images/placeholder/news.png");var d=s.url;a=void 0,a='<a href="'+d+'" class="media" target="_blank"><div class="media-left">',a+='<img class="media-object" aria-hidden="true" src="'+l+'" alt="'+(t=o)+'"></div><div class="media-body">',a+='<h4 class="media-heading">'+t+"</h4>",a+='<p class="media-date">'+r+"</p></div></a>",$("#panel-participants").append(a)}}).fail(function(){$("#panel-participants").empty().append("Error loading feed")})}),$(document).ready(function(){$.get("https://restapi-portsmouth.kb.net/API/Article/HotTopics?PortalID=4&ClientID=12&TopCount=6&DateRange=15&ApiKey=E5p%2FZwD5SrqFPKFB7R2i74hCGNYkr478uWqdbZMujNI%3D&_=1485011710732",function(e){$("#popular-topics-1").empty(),$("#popular-topics-2").empty(),e.sort(function(e,t){return e.ArticleName.length-t.ArticleName.length});for(var t=0;t<e.length;t++){var a=e[t],n=(i=a.ArticleName,'<li class="quick-link"><a href="https://kb.myport.ac.uk/Article/Index/12/4?id='+a.ArticleID+'" target="_blank" role="link">'+i+"</a></li>");t%2==0?$("#popular-topics-1").append(n):$("#popular-topics-2").append(n)}var i}).fail(function(){})});
//# sourceMappingURL=main.min.js.map
